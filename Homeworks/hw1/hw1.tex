\documentclass{article}

\title{Homework 1}
\date{09-26-2023}
\author{Danny Zou}

\usepackage[left=.7in, right=.7in, top=0.5in, bottom=0.5in]{geometry}
\usepackage{amsmath}
\usepackage{indentfirst}
\usepackage{setspace}

\begin{document}
    \pagenumbering{gobble}
    \maketitle
    \onehalfspacing

    \section*{Problems}

    \subsection*{4.15.5}
    
    \subsubsection*{(a)}
    
    $Performance = {Clock Rate}/CPI$\\

    P1 = ${3.0 * 10^9}/1.5$ = $2.0 * 10^9$ IPS

    P2 = ${2.5 * 10^9}/1.0$ =  ${2.5 * 10^9}$ IPS

    P3 = ${4.0 * 10^9}/2.2$ = ${1.8 * 10^9}$  IPS\\

    Processor P2 has the highest performance expressed in giga instructions per second
    
    \subsection*{(b)}
    
    $Number of cycles = (Clock\ Rate) * (Execution\ Time\ in\ seconds)$

    $Number of instructions = (IPS) * (Execution\ Time\ in\ seconds)$

    \vspace{12pt}

    For P1
    
    -Number of cycles = $(3.0 * 10^9) * (10) = 3.0 * 10^{10}$ cycles

    -Number of instructions = $(2.0 * 10^9) * (10) = 2.0 * 10^{10}$ instructions

    \vspace*{6pt}

    For P2

    -Number of cycles = $(2.5 * 10^9) * (10) = 2.5 * 10^{10}$ cycles

    -Number of instructions = $(2.5 * 10^9) * (10) = 2.5 * 10^{10}$ instructions

    \vspace{6pt}

    For P3

    -Number of cycles = ${4.0 * 10^9} * (10) = 4.0 * 10^{10}$

    -Number of instructions = $(1.8 * 10^9) * (10) = 1.8 * 10^{10}$

    \subsection*{(c)}

    Clock Rate = $((Total\ number\ of\ instructions) * (CPI)) / (Execution\ Time)$

    For P1

    -Total number of instructions = $2.0 * 10^{10}$

    -CPI = $1.2 * 1.5 = 1.8$

    -Execution Time = $0.7 * 10 = 7$ seconds

    Clock Rate = $((2.0 * 10^{10}) * 1.8)/7 = 5.14$ GHZ

    For P2

    -Total number of instructions = $2.5 * 10^{10}$

    -CPI = $1.2 * 1 = 1.2$

    -Execution Time = $0.7 * 10 = 7$ seconds

    Clock Rate = $((2.5 * 10^{10}) * 1.2)/7 = 4.28$ GHZ

    For P3 

    -Total number of instructions = $1.8 * 10^{10}$

    -CPI = $1.2 * 2.2 = 2.64$

    -Execution Time = $0.7 * 10 = 7$ seconds

    Clock Rate = $((1.8 * 10^{10}) * 2.64)/7 = 6.79$ GHZ

    \subsection*{4.15.8}

    \subsubsection*{(a)}

    Execution Time = Instruction Count * CPI * Clock Cycle Time

    Average CPI = (Execution Time) / (Instruction Count * Clock Cycle Time)

    \vspace*{6pt}

    Compiler A - $1.1 / {1.0e^9 * 1}$ = 1.1

    Compiler B - $ 1.5 / {1.2e^9 * 1}$ = 1.25

    \subsection*{(b)}

    Execution Time = Instruction Count * CPI * Clock Cycle Time

    Execution Time/Clock Cycle Time = Instruction Count * CPI

    1 / Clock Cycle Time = (Instruction Count * CPI) / Execution Time

    1 / Clock Cycle Time = Clock Rate

    Clock Rate = (Instruction Count * CPI) / Execution Time

    Same CPU time so allow Execution Time to be 1 

    Clock Rate = CR

    \vspace*{6pt}

    $CR_B/CR_A = (Instruction\ Count_B * CPI_B)/(Instruction\ Count_A * CPI_A)$ 

    $CR_B/CR_A = (1.2e^9 * 1.25)/(1.0e^9 * 1.1) \approx 1.37$

    B is 1.37 times faster, so A is .73 times slower



    \subsection*{(c)}

    Speedup = $\frac{Execution\ Time_A}{Execution\ Time_{new}}$

    \vspace*{6pt}
    
    $\frac{Execution\ Time_A}{Execution\ Time_{new}} = \frac{(Instruction\ Count_A * CPI_A)}{(Instruction\ Count_{new} * CPI_{new})} = (1.0e^9 * 1.1)/(6.0e^8) \approx 1.67$ times faster

    \vspace*{6pt}

    $\frac{Execution\ Time_B}{Execution\ Time_{new}} = \frac{(Instruction\ Count_B * CPI_B)}{(Instruction\ Count_{new} * CPI_{new})} = (1.2e^9 * 1.25)/(6.0e^8) \approx 2.27$ times faster

    \newpage

    \subsection*{4.5.10}

    \subsection*{(a)}

    \subsubsection*{Processors - 1}

    Execution Time = Clock Cycle / Clock Rate

    Clock Rate = 2GHz = $2e9$

    \vspace*{6pt}

    Clock Cycles = $(CPI_{arithmetic} * Instructions_{arithmetic}) + (CPI_{load/store} * Instructions_{load/store}) + (CPI_{branch} * Instructions_{branch}) $

    \vspace*{6pt}

    Clock Cycles = $\frac{(2.56e9 * 1)}{0.7 * 1} + \frac{(1.28e9 * 12) }{0.7 * 1}+ (2.56e8 * 5)$

    Clock Cycles = $(3.66e9) + (2.194e{10}) + (1.28e9) = 26.88e9$ cycles

    Execution Time = $\frac{26.88e9\ cycles}{2e9\ cycles/sec} = 13.44$ seconds
    
    \vspace*{6pt}

    Relative Speedup = $\frac{Processors - 1}{Processors - p}$ = $\frac{13.44}{13.44} = 1$

    \subsubsection*{(Processors - 2)}

    Clock cycles = $\frac{(2.56e9 * 1)}{0.7 * 2} + \frac{(1.28e9 * 12)}{0.7*2} + (2.56e8 * 5)$

    \vspace*{6pt}

    Clock cycles = $\frac{2.56e9}{1.4} + \frac{1.536e{10}}{1.4} + (1.28e9) $
    
    \vspace*{6pt}

    Clock cycles = $1.404e10$ cycles
    \vspace*{6pt}
    
    Execution Time = $\frac{1.404e10\ cycles}{2e9\ cycles/sec}$ = 7.02 seconds
    \vspace*{6pt}

    Relative Speedup = $\frac{Processors - 1}{Processors - p}$ = $\frac{13.44}{7.02} = 1.91 $

    \subsubsection*{Processors - 4}

    Clock cycles = $\frac{(2.56e9 * 1)}{0.7 * 4} + \frac{(1.28e9 * 12)}{0.7*4} + (2.56e8 * 5)$

    \vspace*{6pt}

    Clock cycles = $\frac{2.56e9}{2.8} + \frac{1.536e{10}}{2.8} + (1.28e9) $
    
    \vspace*{6pt}

    Clock cycles = $7.22e9$ cycles
    \vspace*{6pt}
    
    Execution Time = $\frac{7.22e9\ cycles}{2e9\ cycles/sec}$ = 3.86 seconds
    \vspace*{6pt}

    Relative Speedup = $\frac{Processors - 1}{Processors - p}$ = $\frac{13.44}{3.86} = 3.48$

    \subsubsection*{Processors - 8}

    Clock cycles = $\frac{(2.56e9 * 1)}{0.7 * 8} + \frac{(1.28e9 * 12)}{0.7*8} + (2.56e8 * 5)$

    \vspace*{6pt}

    Clock cycles = $\frac{2.56e9}{5.6} + \frac{1.536e{10}}{5.6} + (1.28e9) $
    
    \vspace*{6pt}

    Clock cycles = $4.5e9$ cycles
    \vspace*{6pt}
    
    Execution Time = $\frac{4.5e9\ cycles}{2e9\ cycles/sec}$ = 2.25 seconds
    \vspace*{6pt}

    Relative Speedup = $\frac{Processors - 1}{Processors - p}$ = $\frac{13.44}{2.25} = 4.27 $

    \subsection*{(b)}

    \subsubsection*{Processors - 1}

    Execution Time = Clock Cycle / Clock Rate

    Clock Rate = 2 Ghz = $2e9$

    Clock Cycle = $(2.56e9 * 2) + (1.28e9 * 12) + (2.56e8 * 5)$

    Clock Cycle = $(5.12e9) + (1.536e10) + (1.28e9) = 21.76e9$
    \vspace*{6pt}

    Execution Time = $\frac{21.76e9\ cycles}{2e9\ cycles/secs}$ = 10.88 seconds

    \subsubsection*{Processors - 2}

    Execution Time = Clock Cycle / Clock Rate

    Clock Rate = 2 Ghz = $2e9$
    \vspace*{6pt}

    Clock Cycle = $\frac{(2.56e9 * 2)}{0.7 * 2} + \frac{(1.28e9 * 12)}{0.7 * 2} + (2.56e8 * 5)$
    \vspace*{6pt}

    Clock Cycle = $(3.657e9) + (1.097e10) + (1.280e9) = 15.94e9$
    \vspace*{6pt}

    Execution Time = $\frac{15.907e9\ cycles}{2e9\ cycles/secs}$ = 7.954 seconds

    \subsubsection*{Processors - 4}

    Execution Time = Clock Cycle / Clock Rate

    Clock Rate = 2 Ghz = $2e9$
    \vspace*{6pt}

    Clock Cycle = $\frac{(2.56e9 * 2)}{0.7 * 4} + \frac{(1.28e9 * 12)}{0.7 * 4} + (2.56e8 * 5)$
    \vspace*{6pt}

    Clock Cycle = $(1.829e9) + (5.486e9) + (1.280e9) = 8.595e9$
    \vspace*{6pt}

    Execution Time = $\frac{8.595e9\ cycles}{2e9\ cycles/secs}$ = 4.298 seconds

    \subsubsection*{Processors - 8}

    Execution Time = Clock Cycle / Clock Rate

    Clock Rate = 2 Ghz = $2e9$
    \vspace*{6pt}

    Clock Cycle = $\frac{(2.56e9 * 2)}{0.7 * 8} + \frac{(1.28e9 * 12)}{0.7 * 8} + (2.56e8 * 5)$
    \vspace*{6pt}

    Clock Cycle = $(9.142e8) + (2.743e9) + (1.280e9) = 4.937e9$
    \vspace*{6pt}

    Execution Time = $\frac{4.937e9\ cycles}{2e9\ cycles/secs}$ = 2.469 seconds

    \subsection*{(c)}

    \subsubsection*{Execution Time for 4 Processors}

    Clock cycles = $\frac{(2.56e9 * 1)}{0.7 * 4} + \frac{(1.28e9 * 12)}{0.7*4} + (2.56e8 * 5)$

    \vspace*{6pt}

    Clock cycles = $\frac{2.56e9}{2.8} + \frac{1.536e{10}}{2.8} + (1.28e9) $
    
    \vspace*{6pt}

    Clock cycles = $7.22e9$ cycles
    \vspace*{6pt}
    
    Execution Time = $\frac{7.22e9\ cycles}{2e9\ cycles/sec}$ = 3.86 seconds

    \subsubsection*{Find new CPI for single processor}

    x will represent the new CPI for load/store instructions that we will find

    Clock Cycles = $(2.56e9 * 1) + (1.28e9 * x) + (2.56e8 * 5)$

    Clock Cycles = $(2.56e9) + (1.28e9 * x) + (1.28e9)$

    Clock Cycles = $(3.84e9) + (1.28e9 * x)$
    \vspace*{6pt}

    Execution Time = $\frac{3.84e9 + (1.28e9 * x)}{2e9}$
    \vspace*{6pt}

    $3.86 = \frac{3.84e9}{2e9} + \frac{1.28e9 * x}{2e9}$
    \vspace*{6pt}

    $3.86 = 1.92 + .64 * x$
    \vspace*{6pt}

    $x = 3.03$

    $\frac{3.03}{12} = .25 = 25\%$ 
    \vspace*{6pt}

    The CPI of load/store instructions should be reduced by 25\% in order for a single processors to match the performance of four processors using its original CPI value

    \subsection*{4.15.13}

    \subsection*{(a)}

    Execution Time = Clock Cycles / Clock Rate

    Clock Cycles = (CPI * Instructions)

    P1 Clock Rate = 4GHz = 4.0e9
    
    P1 CPI = 0.9

    P1 Instructions = 5.0e9
    \vspace*{6pt}

    P2 Clock Rate = 3GHz = 3.0e9
    
    P2 CPI = 0.75

    P2 Instructions = 1.0e9
    \vspace*{6pt}

    $Execution\ Time_{P1} = \frac{0.9 * 5.0e9}{4.0e9} = \frac{4.5e9}{4.0e9} = 1.125$ seconds

    $Execution\ Time_{P2} = \frac{0.75 * 1.0e9}{3.0e9} = \frac{0.75e9}{3.0e9} = 0.25$ seconds

    We can see that this fallacy is not true for P1 and P2, although P1 has a higher clock rate, it is slower than P2 as shown above

    \subsection*{(b)}

    \subsubsection*{Find P1 execution time}

    Execution Time = Clock Cycles / Clock Rate

    Clock Cycles = (CPI * Instructions)

    P1 Clock Rate = 4GHz = 4.0e9
    
    P1 CPI = 0.9

    P1 Instructions = 1.0e9

    \vspace*{6pt}

    $Execution\ Time_{P1} = \frac{0.9 * 1.0e9}{4.0e9} = .225\ seconds$

    \subsubsection*{Find the numbers of instructions P2 can execute}

    Let x represent the numbers of instructions P2 can execute

    P2 Clock Rate = 3GHz = 3.0e9
    
    P2 CPI = 0.75

    P2 Instructions = 1.0e9
    \vspace*{6pt}

    $Execution\ Time_{P1} = \frac{(0.75 * x)}{3.0e9}$

    .225 = $\frac{.75*x}{3.0e9}$

    $0.675e9 = .75 * x$

    $0.9e9 = x$

    $x = 9.0e8$

    P2 can execute 9.0e8 instructions in the same time that P1 executes 1.0e9 instructions

    \subsection*{(c)}

    MIPS = Number of Instructions / Execution Time * $10^6$

    $MIPS_{P1} = \frac{5.0e9}{1.125e6} = 4.44e3$

    $MIPS_{P2} = \frac{1.0e9}{0.25e6} = 4.0e3$

    This fallacy is not true for P1 and P2, although P1 has a bigger MIPS, it is slower than P2 regarding performance
    \subsection*{(d)}

    MFLOPS = \# FP Operations / Execution Time * 1.0e6

    $\#\ FP\ Operations_{P1} = 5.0e9 * .40 = 2.0e9$

    $\#\ FP\ Operations_{P2} = 1.0e9 * .40 = 4.0e8$
    \vspace*{6pt}

    $MLOPS_{P1} = \frac{2.0e9}{1.125 * 1.0e6} = 1.77e3$
    \vspace*{6pt}

    $MLOPS_{P2} = \frac{4.0e8}{.25 * 1.0e6} = 1.6e3$
    
    \subsection*{4.15.14}

    Total Time = 250 seconds

    FP Instructions Time = 70 seconds

    Load/Store Instructions Time = 85 seconds

    Branch Instruction Time = 40 seconds

    \subsection*{(a)}

    Reduced time for FP instructions = 70 * .80 = 56 seconds

    Total Time = 56 + (250 - 70) = 236 seconds

    Total Time Reduced = 250 - 236 = 14 seconds

    $\frac{14}{250} * 100$ = 5.6\%

    Reducing FP operations by 20\% will cause a 5.6\% reduction in total time

    \subsection*{(b)}

    Original Int Time = 250 - 70 - 85 - 40 = 55

    Total Time reduced by 20\% = $250 * (1-.20) = 200$ seconds

    Total Time = FP time + l/s time + branch time + new int time

    200 = 70 + 85 + 40 + new int time

    new int time = 5 seconds

    $\frac{5}{55} * 100 = 90.9\%$

    Int operation time is reduced by 90.9\% when total time is reduced by 20\%

    \subsection*{(c)}

    Total Time reduced by 20\% = $250 * (1-.20) = 200$ seconds

    Let x represent branch time

    200 = 70 + 85 + x + 55

    200 = 210 + x

    x = -10

    We see here that in order for Total time to be reduced by 20\%, branch time will have to go into the negatives, which is not possible. Thus the total time cannot be reduced by 20\% by reducing only the time for branch instructions.

    \subsection*{4.15.15}

    \subsection*{(a)}

    Execution Time = Clock Cycles / Clock Rate

    Clock Rate = 2Ghz = 2e9

    Clock Cycles = $(CPI_{FP} * Instructions_{FP}) + (CPI_{INT} * Instructions_{INT}) + (CPI_{L/S} * Instructions_{L/S}) + (CPI_{branch}* Instructions_{branch})$

    Clock Cycles = $(50e6 * 1) + (110e6 * 1) + (80e6 * 4) + (16e6 * 2)$

    Clock Cycles = $50e6 + 110e6 + 320e6 + 32e6$

    Clock Cycles = $512e6$

    Execution Time = $\frac{512e6}{2e9} = 256e_{-3} = 0.256$ seconds

    Execution Time two times faster = $\frac{.256}{2}$ = 0.128 seconds

    Let x represent what FP instructions average CPI has to be to make execution time 2 times faster

    0.128 = $\frac{(50e6 * x) + (110e6 * 1) + (80e6 * 4) + (16e6 * 2)}{2e9}$

    0.128 = $\frac{(50e6 * x) + 110e6 + 320e6 + 32e6}{2e9}$

    0.128 = $\frac{(50e6 * x) + 462e6}{2e9}$

    0.128 = $\frac{50e6*x}{2e9} + \frac{462e6}{2e9}$

    0.128 = $\frac{50e6*x}{2e9} + .231$

    -0.103 = $\frac{50e6*x}{2e9}$

    -0.103 = $25e_{-3} * x$

    -0.103 = $0.025 * x$

    x = -4.12

    Since x comes out to be negative, it is impossible to make the program run two times faster by only improving CPI of FP instructions

    \subsection*{(b)}

    Execution Time = Clock Cycles / Clock Rate

    Clock Rate = 2Ghz = 2e9

    Clock Cycles = $(CPI_{FP} * Instructions_{FP}) + (CPI_{INT} * Instructions_{INT}) + (CPI_{L/S} * Instructions_{L/S}) + (CPI_{branch}* Instructions_{branch})$

    Clock Cycles = $(50e6 * 1) + (110e6 * 1) + (80e6 * 4) + (16e6 * 2)$

    Clock Cycles = $50e6 + 110e6 + 320e6 + 32e6$

    Clock Cycles = $512e6$

    Execution Time = $\frac{512e6}{2e9} = 256e_{-3} = 0.256$ seconds

    Execution Time two times faster = $\frac{.256}{2}$ = 0.128 seconds

    Let x represent what L/S instructions average CPI has to be to make execution time 2 times faster

    0.128 = $\frac{(50e6 * 1) + (110e6 * 1) + (80e6 * x) + (16e6 * 2)}{2e9}$

    0.128 = $\frac{50e6 + 110e6 + 32e6 + (80e6 * x)}{2e9}$

    0.128 = $\frac{(80e6 * x) + 192e6}{2e9}$

    0.128 = $\frac{(80e6 * x)}{2e9} + \frac{192e6}{2e9}$

    0.128 = $\frac{(80e6 * x)}{2e9} + .096$

    0.032 = $.040 * x$

    x = 0.8

    $\frac{4}{.8} * 100$ = 500\%

    We would have to improve CPI of L/S Instructions by 500\% if we want the program to run two times faster

    \subsection*{(c)}

    New $CPI_{INT}$ = 1 * (1 - .40) = .6

    New $CPI_{FP}$ = 1 * (1 - .40) = .6

    New $CPI_{L/S}$ = 4 * (1 - .30) = 2.8

    New $CPI_{Branch}$ = 2 * (1 - .30) = 1.4

    Execution Time = Clock Cycles / Clock Rate

    Clock Rate = 2Ghz = 2e9

    Clock Cycles = $(CPI_{FP} * Instructions_{FP}) + (CPI_{INT} * Instructions_{INT}) + (CPI_{L/S} * Instructions_{L/S}) + (CPI_{branch}* Instructions_{branch})$

    Clock Cycles = $(50e6 * .6) + (110e6 * .6) + (80e6 * 2.8) + (16e6 * 1.4)$

    Clock Cycles = $30e6 + 66e6 + 224e6 + 22.4e6$

    Clock Cycles = $342.4e6$

    Execution Time = $\frac{342.4e6}{2e9} = 171.2e_{-3} = 0.1712$ seconds

    $\frac{0.256}{.1712}$ = 1.495

    Execution Time improved by 1.495 times.

    \subsection*{4.15.16}
    
    \subsection*{(a)}

    Time = 100 seconds

    Per-Processor Tim(T(p)) = Time(T) / Processors(p) + 4

    T(2) = $\frac{100}{2} + 4 = 54$ seconds

    Speedup = $\frac{100}{54} = 1.85$ 

    Ideal Speedup = $\frac{100}{\frac{100}{2}} = \frac{100}{50} = 2$

    Ratio = $\frac{1.85}{2} = 0.925$
    \vspace*{6pt}

    T(4) = $\frac{100}{4} + 4 = 29$ seconds

    Speedup = $\frac{100}{29} = 3.44$ 

    Ideal Speedup = $\frac{100}{\frac{100}{4}} = \frac{100}{25} = 4$

    Ratio = $\frac{3.44}{4} = 0.86$
    \vspace*{6pt}

    T(8) = $\frac{100}{8} + 4 = 16.5$ seconds

    Speedup = $\frac{100}{16.5} = 6.06$ 

    Ideal Speedup = $\frac{100}{\frac{100}{8}} = \frac{100}{12.5} = 8$

    Ratio = $\frac{6.06}{8} = 0.7575$
    \vspace*{6pt}

    T(16) = $\frac{100}{16} + 4 = 10.25$ seconds

    Speedup = $\frac{100}{10.25} = 9.75$ 

    Ideal Speedup = $\frac{100}{\frac{100}{16}} = \frac{100}{6.25} = 16$

    Ratio = $\frac{9.75}{16} = 0.609$
    \vspace*{6pt}

    T(32) = $\frac{100}{32} + 4 = 7.125$ seconds

    Speedup = $\frac{100}{7.125} = 14.035$ 

    Ideal Speedup = $\frac{100}{\frac{100}{32}} = \frac{100}{3.125} = 32$

    Ratio = $\frac{14.035}{32} = 0.439$
    \vspace*{6pt}

    T(64) = $\frac{100}{64} + 4 = 5.5625$ seconds

    Speedup = $\frac{100}{5.5625} = 17.97$ 

    Ideal Speedup = $\frac{100}{\frac{100}{64}} = \frac{100}{1.5625} = 64$

    Ratio = $\frac{17.97}{64} = 0.28$
    \vspace*{6pt}

    T(128) = $\frac{100}{128} + 4 = 4.781$ seconds

    Speedup = $\frac{100}{4.781} = 20.91$ 

    Ideal Speedup = $\frac{100}{\frac{100}{128}} = \frac{100}{0.78125} = 128$

    Ratio = $\frac{20.91}{128} = 0.163$
    \vspace*{6pt}

\end{document}